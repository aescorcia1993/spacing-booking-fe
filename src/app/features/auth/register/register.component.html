<div class="register-container">
  <div class="register-wrapper">
    <div class="register-header">
      <i class="pi pi-building" style="font-size: 3rem; color: #0033A0;"></i>
      <h1>SpaceBooking</h1>
      <p>Sistema de Reservas de Espacios</p>
    </div>

    <p-card styleClass="register-card">
      <ng-template pTemplate="content">
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
          <h2 class="register-title">Crear Cuenta</h2>

          <div class="field">
            <label for="name">Nombre</label>
            <input
              pInputText
              id="name"
              formControlName="name"
              placeholder="Tu nombre completo"
              class="w-full"
              [class.ng-invalid]="registerForm.get('name')?.invalid && registerForm.get('name')?.touched"
            />
            @if (registerForm.get('name')?.invalid && registerForm.get('name')?.touched) {
              <small class="p-error">El nombre es requerido</small>
            }
          </div>

          <div class="field">
            <label for="email">Email</label>
            <input
              pInputText
              id="email"
              formControlName="email"
              type="email"
              placeholder="admin@spacebooking.com"
              class="w-full"
              [class.ng-invalid]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
            />
            @if (registerForm.get('email')?.hasError('required') && registerForm.get('email')?.touched) {
              <small class="p-error">Email es requerido</small>
            }
            @if (registerForm.get('email')?.hasError('email') && registerForm.get('email')?.touched) {
              <small class="p-error">Email no es válido</small>
            }
          </div>

          <div class="field">
            <label for="password">Contraseña</label>
            <span class="p-input-icon-right w-full">
              <p-password
                formControlName="password"
                [toggleMask]="true"
                [feedback]="false"
                placeholder="••••••••"
                styleClass="w-full"
                inputStyleClass="w-full"
                [class.ng-invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
              />
            </span>
            @if (registerForm.get('password')?.hasError('required') && registerForm.get('password')?.touched) {
              <small class="p-error">Contraseña es requerida</small>
            }
            @if (registerForm.get('password')?.hasError('minlength') && registerForm.get('password')?.touched) {
              <small class="p-error">Contraseña debe tener al menos 8 caracteres</small>
            }
          </div>

          <div class="field">
            <label for="password_confirmation">Confirmar Contraseña</label>
            <span class="p-input-icon-right w-full">
              <p-password
                formControlName="password_confirmation"
                [toggleMask]="true"
                [feedback]="false"
                placeholder="Confirma tu contraseña"
                styleClass="w-full"
                inputStyleClass="w-full"
                [class.ng-invalid]="registerForm.get('password_confirmation')?.invalid && registerForm.get('password_confirmation')?.touched"
              />
            </span>
            @if (registerForm.get('password_confirmation')?.hasError('required') && registerForm.get('password_confirmation')?.touched) {
              <small class="p-error">Debes confirmar la contraseña</small>
            }
            @if (registerForm.hasError('passwordMismatch') && registerForm.get('password_confirmation')?.touched) {
              <small class="p-error">Las contraseñas no coinciden</small>
            }
          </div>

          @if (error()) {
            <p-message severity="error" [text]="error()!" styleClass="w-full mb-3" />
          }

          <div class="button-container">
            <p-button
              label="Registrarse"
              icon="pi pi-user-plus"
              [loading]="loading()"
              [disabled]="registerForm.invalid || loading()"
              type="submit"
              styleClass="w-full btn-primary"
            />
          </div>

          <div class="register-link">
            <span>¿Ya tienes cuenta?</span>
            <a routerLink="/login">Inicia sesión aquí</a>
          </div>
        </form>
      </ng-template>
    </p-card>
  </div>
</div>
